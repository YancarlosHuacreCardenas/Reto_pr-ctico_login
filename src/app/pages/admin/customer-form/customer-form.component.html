<div class="form-container">
  <div class="form-header">
    <h2>{{ isEditing ? 'Editar Cliente' : 'Registrar Nuevo Cliente' }}</h2>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
    <div *ngIf="error" class="error-message">{{ error }}</div>

    <!-- NOMBRE -->
    <div class="form-group">
      <label for="firstName">Nombre:</label>
      <input
        type="text"
        id="firstName"
        formControlName="firstName"
        class="form-input"
        placeholder="Ingrese el nombre"
      />
      <span *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched" class="error-text">
        El nombre es requerido (mínimo 2 caracteres)
      </span>
    </div>

    <!-- APELLIDO -->
    <div class="form-group">
      <label for="lastName">Apellido:</label>
      <input
        type="text"
        id="lastName"
        formControlName="lastName"
        class="form-input"
        placeholder="Ingrese el apellido"
      />
      <span *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched" class="error-text">
        El apellido es requerido (mínimo 2 caracteres)
      </span>
    </div>

    <!-- TELÉFONO -->
    <div class="form-group">
      <label for="phone">Teléfono:</label>
      <input
        type="text"
        id="phone"
        formControlName="phone"
        class="form-input"
        placeholder="Ej: 987654321"
        maxlength="9"
        inputmode="numeric"
        pattern="[0-9]*"
        oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,9)"
      />
      <span *ngIf="form.get('phone')?.invalid && form.get('phone')?.touched" class="error-text">
        El teléfono debe tener exactamente 9 dígitos.
      </span>
    </div>

    <!-- EMAIL -->
    <div class="form-group">
      <label for="email">Correo Electrónico:</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-input"
        placeholder="correo@example.com"
      />
      <span *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="error-text">
        Ingrese un correo válido.
      </span>
    </div>

    <!-- PREFERENCIAS -->
    <div class="form-group">
      <label for="preferences">Preferencias:</label>
      <textarea
        id="preferences"
        formControlName="preferences"
        class="form-input"
        rows="3"
        placeholder="Notas o preferencias del cliente (opcional)"
      ></textarea>
    </div>

    <!-- TIPO DE CLIENTE -->
    <div class="form-group">
      <label for="clientType">Tipo de Cliente:</label>
      <select id="clientType" formControlName="clientType" class="form-input">
        <option value="V">VIP</option>
        <option value="R">Regular</option>
        <option value="N">Nuevo</option>
      </select>
    </div>

    <!-- ESTADO -->
    <div class="form-group checkbox">
      <input type="checkbox" id="isActive" formControlName="isActive" class="form-checkbox" />
      <label for="isActive">Cliente Activo</label>
    </div>

    <!-- FECHAS -->
    <div class="form-group">
      <label for="registeredAt">Fecha de Registro:</label>
      <input type="text" id="registeredAt" formControlName="registeredAt" class="form-input" readonly />
    </div>

    <div class="form-group">
      <label for="updatedAt">Última Actualización:</label>
      <input type="text" id="updatedAt" formControlName="updatedAt" class="form-input" readonly />
    </div>

    <!-- BOTONES -->
    <div class="form-actions">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="form.invalid || loading"
      >
        {{ loading ? (isEditing ? 'Actualizando...' : 'Guardando...') : (isEditing ? 'Actualizar' : 'Guardar') }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancelar</button>
    </div>
  </form>
</div>
